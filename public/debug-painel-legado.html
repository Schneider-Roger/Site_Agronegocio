<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Teste Painel Espa√ßo Legado</title>
  <link rel="stylesheet" href="assets/css/home.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { 
      background: #fff; 
      margin: 0; 
      padding: 20px;
      font-family: 'Montserrat', sans-serif;
    }
    
    .debug-info {
      background: #f0f8ff;
      border: 2px solid #0066cc;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      max-width: 800px;
      margin: 20px auto;
    }
    
    .debug-info h3 {
      color: #0066cc;
      margin-top: 0;
    }
    
    .debug-info p {
      margin: 10px 0;
      color: #333;
    }
    
    .highlight {
      background: #ffeb3b;
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="debug-info">
    <h3>üéØ TESTE DO PAINEL HOVER - ESPA√áO LEGADO</h3>
    <p><strong>Status:</strong> <span class="highlight">Painel implementado e ativo</span></p>
    <p><strong>Como testar:</strong> Passe o mouse sobre o card laranja "ESPA√áO LEGADO"</p>
    <p><strong>O que deve acontecer:</strong> Um grande ret√¢ngulo laranja deve aparecer abaixo com as logos das empresas</p>
    <p><strong>Localiza√ß√£o:</strong> Exatamente como mostrado na imagem de refer√™ncia</p>
  </div>

  <!-- SESS√ÉO EXPOSITOR PARA TESTE -->
  <section id="expositor" class="sessao-expositor">
    <div class="container-expositor">
      <p class="expositor-label">EXPOSITORES</p>
      <h1 class="expositor-titulo">O CORA√á√ÉO DA FEIRA</h1>
      <p class="expositor-setores-label">Setores</p>
      <div class="expositor-setores-grid">
        <!-- Setores ser√£o carregados dinamicamente via JavaScript -->
      </div>
    </div>
  </section>

  <div class="debug-info">
    <h3>‚úÖ VERIFICA√á√ÉO FINAL</h3>
    <p id="debug-status">Carregando dados...</p>
    <p id="debug-logos">Verificando logos...</p>
    <p id="debug-painel">Verificando painel...</p>
  </div>

  <script>
    function carregarDadosExpositor() {
      console.log('[TESTE] *** CARREGANDO DADOS DOS EXPOSITORES ***');
      
      fetch('http://localhost:3000/api/home')
        .then(res => res.json())
        .then(data => {
          console.log('[TESTE] Dados recebidos:', data);
          
          // Debug status
          document.getElementById('debug-status').innerHTML = '‚úÖ <strong>Dados carregados com sucesso!</strong>';
          
          // Verificar logos do Espa√ßo Legado
          const logosLegado = data.expositor_setor1_logos || [];
          document.getElementById('debug-logos').innerHTML = `‚úÖ <strong>Espa√ßo Legado:</strong> ${logosLegado.length} logos encontradas`;
          
          const setoresGrid = document.querySelector('.expositor-setores-grid');
          if (setoresGrid) {
            setoresGrid.innerHTML = '';
            
            let totalSetores = Math.max(4, 4); // Garantir 4 setores
            
            for (let i = 1; i <= totalSetores; i++) {
              const textoSetor = data[`expositor_setor${i}_texto`] || `Setor ${i}`;
              const logosSetor = data[`expositor_setor${i}_logos`] || [];
              
              // Criar elemento do setor
              const setorCard = document.createElement('div');
              setorCard.className = 'expositor-setor-card';
              setorCard.setAttribute('data-setor', `setor${i}`);
              
              // Nome do setor
              const nomeSetor = document.createElement('div');
              nomeSetor.className = 'setor-nome';
              nomeSetor.textContent = textoSetor;
              setorCard.appendChild(nomeSetor);
              
              // Se for o "Espa√ßo Legado" (setor 1), adicionar painel de hover
              if (i === 1 && textoSetor.includes('LEGADO') && logosSetor.length > 0) {
                const hoverPanel = document.createElement('div');
                hoverPanel.className = 'legado-hover-panel';
                
                // Header do painel
                const panelHeader = document.createElement('div');
                panelHeader.className = 'panel-header';
                panelHeader.textContent = 'Empresas Participantes';
                hoverPanel.appendChild(panelHeader);
                
                // Container das logos
                const logosContainer = document.createElement('div');
                logosContainer.className = 'logos-container';
                
                // Adicionar logos (m√°ximo 12 para n√£o sobrecarregar)
                logosSetor.slice(0, 12).forEach((logoPath, logoIndex) => {
                  const logoImg = document.createElement('img');
                  logoImg.src = `http://localhost:3000${logoPath}`;
                  logoImg.alt = `Empresa ${logoIndex + 1} - ${textoSetor}`;
                  logoImg.className = 'logo-item';
                  
                  logoImg.onerror = function() {
                    console.error(`[TESTE] ‚ùå Erro ao carregar logo hover: ${logoPath}`);
                    this.style.display = 'none';
                  };
                  logoImg.onload = function() {
                    console.log(`[TESTE] ‚úÖ Logo hover carregada: ${logoPath}`);
                  };
                  
                  logosContainer.appendChild(logoImg);
                });
                
                hoverPanel.appendChild(logosContainer);
                setorCard.appendChild(hoverPanel);
                
                // Debug do painel
                document.getElementById('debug-painel').innerHTML = `‚úÖ <strong>Painel hover:</strong> Adicionado com ${Math.min(logosSetor.length, 12)} logos`;
                
                console.log(`[TESTE] ‚úÖ Painel hover adicionado ao Espa√ßo Legado com ${Math.min(logosSetor.length, 12)} logos`);
              }
              
              setoresGrid.appendChild(setorCard);
            }
            
            console.log('[TESTE] ‚úÖ Se√ß√£o de expositores renderizada com sucesso');
          }
        })
        .catch(error => {
          console.error('[TESTE] ‚ùå ERRO ao carregar dados da home:', error);
          document.getElementById('debug-status').innerHTML = '‚ùå <strong>Erro ao carregar dados!</strong>';
        });
    }
    
    // Carrega dados quando a p√°gina for carregada
    document.addEventListener('DOMContentLoaded', function() {
      console.log('[TESTE] DOMContentLoaded executado!');
      carregarDadosExpositor();
    });
  </script>
</body>
</html>
